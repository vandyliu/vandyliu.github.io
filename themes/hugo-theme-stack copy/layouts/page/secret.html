{{ define "body-class" }}template-secret{{ end }}
{{ define "main" }}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Secret Page</title>
    <!-- Prevent image preview in link shares -->
    <meta property="og:title" content="Secret Page">
    <meta property="og:description" content="Password required">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Secret Page">
    <meta name="twitter:description" content="Password required">
    <meta name="twitter:image" content="">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            font-family: 'Georgia', serif;
            overflow: hidden;
        }

        /* Password Screen */
        .password-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .password-screen.hidden {
            display: none;
        }

        .password-container {
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .password-container h2 {
            color: #fff;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .password-container input {
            padding: 15px 25px;
            font-size: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            outline: none;
            width: 250px;
            text-align: center;
        }

        .password-container input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .password-container input:focus {
            border-color: #ff6b9d;
        }

        .password-container button {
            margin-top: 20px;
            padding: 12px 40px;
            font-size: 1rem;
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .password-container button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.4);
        }

        .error-message {
            color: #ff6b6b;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .error-message.show {
            opacity: 1;
        }

        /* Main Content */
        .main-content {
            display: none;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 50%, #ff9a9e 100%);
            position: relative;
            overflow: hidden;
        }

        .main-content.visible {
            display: block;
        }

        /* Sparkles */
        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 3s infinite;
            box-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #ff69b4;
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0) translateY(0);
            }
            50% {
                opacity: 1;
                transform: scale(1) translateY(-20px);
            }
        }

        /* Envelope Container */
        .envelope-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .envelope-container:hover {
            transform: translate(-50%, -50%) scale(1.05);
        }

        .envelope-container.opened {
            pointer-events: none;
        }

        .envelope-container.hidden {
            display: none;
        }

        /* Envelope */
        .envelope {
            width: 280px;
            height: 180px;
            position: relative;
        }

        .envelope-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border-radius: 10px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: top center;
            transition: transform 0.8s ease-in-out;
        }

        .envelope-flap::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 140px solid transparent;
            border-right: 140px solid transparent;
            border-top: 100px solid #c0392b;
            filter: brightness(0.9);
        }

        .envelope-container.opened .envelope-flap {
            transform: rotateX(180deg);
        }

        /* Heart seal */
        .heart-seal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 45px;
            background: #ff69b4;
            border-radius: 50%;
            z-index: 10;
        }

        .heart-seal::before,
        .heart-seal::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 50px;
            background: #ff69b4;
            border-radius: 50%;
        }

        .heart-seal::before {
            top: -25px;
            left: 0;
        }

        .heart-seal::after {
            top: 0;
            left: 25px;
        }

        .envelope-container.opened .heart-seal {
            opacity: 0;
            transition: opacity 0.3s;
        }

        .click-hint {
            text-align: center;
            margin-top: 20px;
            color: #c0392b;
            font-size: 1.2rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Valentine Content */
        .valentine-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
            padding: 20px;
            box-sizing: border-box;
        }

        .valentine-content.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .valentine-card {
            background: transparent;
            padding: 20px 15px;
            max-width: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .valentine-image {
            width: 90vw;
            max-width: 350px;
            height: auto;
            max-height: 55vh;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 4px solid #ff69b4;
        }

        .valentine-question {
            font-size: 1.6rem;
            color: #c0392b;
            margin-bottom: 20px;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 25px;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .buttons-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .buttons-container.hidden {
            display: none;
        }

        .yes-btn {
            padding: 20px 60px;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            font-weight: bold;
        }

        .yes-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.4);
        }

        .no-btn {
            padding: 10px 30px;
            font-size: 1rem;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: left 0.3s, top 0.3s;
            position: relative;
        }

        .no-btn.moving {
            position: fixed;
            z-index: 100;
        }

        .success-message {
            display: none;
            font-size: 2.5rem;
            color: white;
            margin-top: 20px;
            animation: bounceIn 0.5s;
            font-family: 'Caveat', cursive;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .success-message.visible {
            display: block;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .are-you-sure {
            color: #e74c3c;
            font-size: 0.9rem;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 16px;
            border-radius: 20px;
        }

        .are-you-sure.visible {
            opacity: 1;
        }

        /* Plans Letter styling */
        .plans-letter {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 200;
            padding: 20px;
            overflow-y: auto;
            cursor: pointer;
        }

        .plans-letter.visible {
            display: flex;
        }

        .plans-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .plans-card {
            background: linear-gradient(135deg, #fff9f0 0%, #fff5f5 100%);
            padding: 12px 18px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            max-width: 340px;
            width: 92%;
            border: 2px solid #d4a574;
            position: relative;
            animation: slideUp 0.6s ease-out;
            cursor: default;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Caveat', cursive;
        }

        .plans-close-hint {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.85rem;
            margin-top: 15px;
            margin-bottom: 0;
            text-align: center;
            font-style: italic;
        }

        .plans-details {
            background: rgba(255, 255, 255, 0.6);
            padding: 6px 10px;
            border-radius: 8px;
            margin-bottom: 5px;
            width: 100%;
            box-sizing: border-box;
        }

        .plans-details p {
            margin: 1px 0;
            font-size: 0.95rem;
            color: #555;
        }

        .plans-details strong {
            color: #8b4513;
        }

        @keyframes slideUp {
            0% { 
                opacity: 0;
                transform: translateY(50px);
            }
            100% { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .plans-title {
            font-size: 1.6rem;
            color: #8b4513;
            margin-bottom: 5px;
            font-family: 'Caveat', cursive;
            font-weight: 700;
            text-align: center;
            width: 100%;
        }

        .meo-logo {
            max-width: 90px;
            height: auto;
            margin: 4px auto;
            display: block;
        }

        .plans-list {
            text-align: left;
            margin: 5px 0;
            padding-left: 20px;
            padding-right: 5px;
            font-size: 1.05rem;
            color: #333;
            line-height: 1.3;
            width: 100%;
            box-sizing: border-box;
        }

        .plans-list li {
            margin-bottom: 4px;
        }

        .plans-list strong {
            color: #c0392b;
        }

        .dress-note {
            font-size: 0.9rem;
            color: #e91e63;
        }

        .meo-gif {
            max-width: 150px;
            height: auto;
            margin: 20px auto;
            display: block;
            border-radius: 10px;
        }

        .plans-footer {
            font-size: 1.1rem;
            color: #e91e63;
            margin-top: 4px;
            font-style: italic;
        }

        /* Mobile responsive for plans letter */
        @media screen and (max-width: 600px) {
            .plans-letter {
                padding: 10px;
            }

            .plans-card {
                padding: 10px 12px;
                max-width: 95%;
            }

            .plans-title {
                font-size: 1.5rem;
                margin-bottom: 6px;
            }

            .meo-logo {
                max-width: 80px;
                margin: 5px auto;
            }

            .plans-list {
                font-size: 1rem;
                padding-left: 15px;
                margin: 6px 0;
                line-height: 1.8;
            }

            .plans-list li {
                margin-bottom: 3px;
            }

            .meo-gif {
                max-width: 80px;
                margin: 8px auto;
            }

            .plans-footer {
                font-size: 1rem;
                margin-top: 5px;
            }

            .plans-close-hint {
                font-size: 0.75rem;
            }
        }

        /* Placeholder image styling */
        .placeholder-image {
            width: 90vw;
            max-width: 350px;
            height: 55vh;
            max-height: 500px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            border-radius: 15px;
            margin: 0 auto 15px auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 4px solid #ff69b4;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4rem;
        }

        /* Cat stickers */
        .cat-stickers {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 150;
            display: none;
        }

        .cat-stickers.visible {
            display: block;
        }

        .cat-sticker {
            position: absolute;
            width: 80px;
            height: auto;
            animation: shake 0.5s ease-in-out infinite;
        }

        .cat-sticker.top-left {
            top: 5px;
            left: 5px;
            animation-delay: 0s;
        }

        .cat-sticker.top-right {
            top: 5px;
            right: 5px;
            animation-delay: 0.1s;
        }

        .cat-sticker.bottom-left {
            bottom: 5px;
            left: 5px;
            animation-delay: 0.2s;
        }

        .cat-sticker.bottom-right {
            bottom: 5px;
            right: 5px;
            animation-delay: 0.3s;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }

        @media screen and (max-width: 600px) {
            .cat-sticker {
                width: 55px;
            }
        }

        /* Reopen plans button */
        .reopen-plans-btn {
            background: linear-gradient(135deg, #e91e63, #c2185b);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            display: none;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
            transition: transform 0.2s;
            margin-top: 15px;
        }

        .reopen-plans-btn:hover {
            transform: scale(1.05);
        }

        .reopen-plans-btn.visible {
            display: inline-block;
        }

        /* Mobile Responsive Styles */
        @media screen and (max-width: 600px) {
            .password-container {
                padding: 30px 20px;
                margin: 0 20px;
                width: calc(100% - 40px);
                max-width: 350px;
            }

            .password-container h2 {
                font-size: 1.2rem;
            }

            .password-container input {
                width: 100%;
                max-width: 220px;
                padding: 12px 20px;
                font-size: 0.95rem;
            }

            .password-container button {
                padding: 10px 30px;
                font-size: 0.95rem;
            }

            .envelope {
                width: 220px;
                height: 140px;
            }

            .envelope-flap::before {
                border-left: 110px solid transparent;
                border-right: 110px solid transparent;
                border-top: 80px solid #c0392b;
            }

            .heart-seal {
                width: 30px;
                height: 30px;
            }

            .heart-seal::before,
            .heart-seal::after {
                width: 30px;
                height: 30px;
            }

            .heart-seal::before {
                top: -15px;
            }

            .heart-seal::after {
                left: 15px;
            }

            .click-hint {
                font-size: 1rem;
            }

            .valentine-content {
                width: 100%;
                padding: 10px;
            }

            .valentine-card {
                padding: 10px 10px;
            }

            .placeholder-image,
            .valentine-image {
                width: 85vw;
                max-width: 320px;
                height: auto;
                max-height: 60vh;
                font-size: 3rem;
            }

            .valentine-question {
                font-size: 1.2rem;
                margin-bottom: 15px;
                padding: 10px 18px;
            }

            .buttons-container {
                gap: 15px;
            }

            .yes-btn {
                padding: 15px 40px;
                font-size: 1.2rem;
            }

            .no-btn {
                padding: 8px 25px;
                font-size: 0.9rem;
            }

            .success-message {
                font-size: 1.5rem;
            }

            .are-you-sure {
                font-size: 0.85rem;
            }
        }

        /* Extra small screens */
        @media screen and (max-width: 380px) {
            .envelope {
                width: 180px;
                height: 115px;
            }

            .envelope-flap::before {
                border-left: 90px solid transparent;
                border-right: 90px solid transparent;
                border-top: 65px solid #c0392b;
            }

            .placeholder-image,
            .valentine-image {
                max-width: 200px;
                font-size: 2.5rem;
            }

            .valentine-question {
                font-size: 1.1rem;
            }

            .yes-btn {
                padding: 12px 35px;
                font-size: 1.1rem;
            }
        }

        /* Ensure touch targets are large enough on mobile */
        @media (hover: none) and (pointer: coarse) {
            .yes-btn {
                min-height: 50px;
            }

            .no-btn {
                min-height: 44px;
                min-width: 80px;
            }

            .password-container button {
                min-height: 44px;
            }
        }
    </style>
</head>
<body>
    <!-- Password Screen -->
    <div class="password-screen" id="passwordScreen">
        <div class="password-container">
            <h2>Enter the secret password</h2>
            <input type="password" id="passwordInput" placeholder="Password..." autocomplete="off">
            <br>
            <button onclick="checkPassword()">Enter</button>
            <p class="error-message" id="errorMessage">Incorrect password, try again!</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Sparkles will be generated here -->
        
        <!-- Envelope -->
        <div class="envelope-container" id="envelopeContainer" onclick="openEnvelope()">
            <div class="envelope">
                <div class="envelope-body"></div>
                <div class="envelope-flap"></div>
                <div class="heart-seal"></div>
            </div>
            <p class="click-hint">Click to open!</p>
        </div>

        <!-- Valentine Content -->
        <div class="valentine-content" id="valentineContent">
            <div class="valentine-card">
                <img src="/secret/valentine-photo.jpg" alt="Us" class="valentine-image">
                
                <p class="valentine-question">Will you be my Valentine?</p>
                
                <div class="buttons-container" id="buttonsContainer">
                    <button class="yes-btn" onclick="sayYes()">Yes!</button>
                    <button class="no-btn" id="noBtn" onclick="moveNoButton()">No</button>
                </div>
                
                <p class="are-you-sure" id="areYouSure">Are you sure? ðŸ¥º</p>
                <p class="success-message" id="successMessage">Yay! I love you! ðŸ’–</p>
                <button class="reopen-plans-btn" id="reopenPlansBtn" onclick="togglePlans()">ðŸ“‹ View Plans</button>
            </div>

            <!-- Cat Stickers (shows after Yes) -->
            <div class="cat-stickers" id="catStickers">
                <img class="cat-sticker top-left" id="catTopLeft" src="" alt="cat">
                <img class="cat-sticker top-right" id="catTopRight" src="" alt="cat">
                <img class="cat-sticker bottom-left" id="catBottomLeft" src="" alt="cat">
                <img class="cat-sticker bottom-right" id="catBottomRight" src="" alt="cat">
            </div>
            
            <!-- Plans Letter (shows after Yes) -->
            <div class="plans-letter" id="plansLetter" onclick="togglePlans()">
                <div class="plans-wrapper">
                    <div class="plans-card" onclick="event.stopPropagation()">
                        <h2 class="plans-title">The Plan ðŸ’•</h2>
                        <div class="plans-details">
                            <p><strong>When:</strong> Sat Feb 14, 2026</p>
                            <p><strong>Who:</strong> Ada and Vandy</p>
                            <p><strong>Where:</strong> Downtown Vancouver</p>
                            <p><strong>Attire:</strong> Dress to impress ðŸ‘—</p>
                        </div>
                        <img src="https://images.squarespace-cdn.com/content/v1/65aec26b92b4477f575b76b2/02e3c66b-932f-403e-84de-67d91b83a56b/Meo-Chinatown-Lockup-Black-RGB.png" alt="Meo Restaurant" class="meo-logo">
                        <ol class="plans-list">
                            <li>Valentine's dinner at <strong>Meo</strong></li>
                            <li>Go home and have some drinks ðŸ¥‚</li>
                            <li>Enjoy each other's company ðŸ’•</li>
                        </ol>
                        <p class="plans-footer">Can't wait! ðŸ¥°</p>
                    </div>
                    <p class="plans-close-hint">tap anywhere to close</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Password configuration - add more passwords here for different content
        const PASSWORDS = {
            'ada-valentine-2026': 'valentine',
            // 'future-password': 'other-content',
        };

        let currentContent = null;
        let noButtonMoveCount = 0;

        // Check password
        function checkPassword() {
            const input = document.getElementById('passwordInput').value;
            const errorMessage = document.getElementById('errorMessage');
            
            if (PASSWORDS[input]) {
                currentContent = PASSWORDS[input];
                document.getElementById('passwordScreen').classList.add('hidden');
                document.getElementById('mainContent').classList.add('visible');
                createSparkles();
            } else {
                errorMessage.classList.add('show');
                document.getElementById('passwordInput').value = '';
                setTimeout(() => errorMessage.classList.remove('show'), 2000);
            }
        }

        // Allow Enter key to submit password
        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        // Create sparkles
        function createSparkles() {
            const mainContent = document.getElementById('mainContent');
            const sparkleCount = 50;
            
            for (let i = 0; i < sparkleCount; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 3 + 's';
                sparkle.style.animationDuration = (2 + Math.random() * 2) + 's';
                sparkle.style.width = (5 + Math.random() * 10) + 'px';
                sparkle.style.height = sparkle.style.width;
                mainContent.appendChild(sparkle);
            }
        }

        // Open envelope
        function openEnvelope() {
            const envelopeContainer = document.getElementById('envelopeContainer');
            envelopeContainer.classList.add('opened');
            
            setTimeout(() => {
                envelopeContainer.classList.add('hidden');
                document.getElementById('valentineContent').classList.add('visible');
            }, 1000);
        }

        // Yes button clicked
        // Cat sticker images
        const catImages = [
            '/secret/Subject.png',
            '/secret/Subject (1).png',
            '/secret/Subject (2).png',
            '/secret/Subject (3).png',
            '/secret/Subject (4).png',
            '/secret/Subject (5).png',
            '/secret/Subject (6).png'
        ];

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function sayYes() {
            // Hide buttons
            document.getElementById('buttonsContainer').classList.add('hidden');
            document.getElementById('areYouSure').classList.remove('visible');
            
            // Show success message
            document.getElementById('successMessage').classList.add('visible');

            // Show cat stickers with random images
            const shuffledCats = shuffleArray(catImages);
            document.getElementById('catTopLeft').src = shuffledCats[0];
            document.getElementById('catTopRight').src = shuffledCats[1];
            document.getElementById('catBottomLeft').src = shuffledCats[2];
            document.getElementById('catBottomRight').src = shuffledCats[3];
            document.getElementById('catStickers').classList.add('visible');
            
            // Confetti explosion!
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });
            
            // More confetti!
            setTimeout(() => {
                confetti({
                    particleCount: 100,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 }
                });
            }, 250);
            
            setTimeout(() => {
                confetti({
                    particleCount: 100,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 }
                });
            }, 400);

            // Continuous confetti for a bit
            let confettiInterval = setInterval(() => {
                confetti({
                    particleCount: 50,
                    spread: 100,
                    origin: { y: Math.random() - 0.2 }
                });
            }, 500);

            setTimeout(() => clearInterval(confettiInterval), 3000);
            
            // Show the plans letter after confetti
            setTimeout(() => {
                document.getElementById('plansLetter').classList.add('visible');
                document.getElementById('reopenPlansBtn').classList.add('visible');
            }, 2500);
        }

        // Toggle plans letter visibility
        function togglePlans() {
            document.getElementById('plansLetter').classList.toggle('visible');
        }

        // Move the No button
        let lastPositionIndex = -1;
        
        function moveNoButton() {
            const noBtn = document.getElementById('noBtn');
            const areYouSure = document.getElementById('areYouSure');
            
            noButtonMoveCount++;
            areYouSure.classList.add('visible');
            
            // Make button position fixed
            noBtn.classList.add('moving');
            
            // Use CSS viewport units for guaranteed visibility
            // Avoid center-bottom area where rejection message appears
            const positions = [
                { left: '5vw', top: '5vh' },           // top-left
                { right: '5vw', top: '5vh' },          // top-right
                { left: '5vw', top: '35vh' },          // middle-left
                { right: '5vw', top: '35vh' },         // middle-right
                { left: '5vw', bottom: '5vh' },        // bottom-left (safe - away from center)
                { right: '5vw', bottom: '5vh' },       // bottom-right (safe - away from center)
                { left: '5vw', bottom: '25vh' },       // lower-left
                { right: '5vw', bottom: '25vh' }       // lower-right
            ];
            
            // Pick a random position different from the last one
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * positions.length);
            } while (newIndex === lastPositionIndex && positions.length > 1);
            lastPositionIndex = newIndex;
            
            const pos = positions[newIndex];
            
            // Reset all positioning properties first
            noBtn.style.left = 'auto';
            noBtn.style.right = 'auto';
            noBtn.style.top = 'auto';
            noBtn.style.bottom = 'auto';
            
            // Apply the new position using viewport units
            if (pos.left) noBtn.style.left = pos.left;
            if (pos.right) noBtn.style.right = pos.right;
            if (pos.top) noBtn.style.top = pos.top;
            if (pos.bottom) noBtn.style.bottom = pos.bottom;
            
            // Add tiny random offset for variety (using CSS calc)
            const offsetX = Math.round((Math.random() - 0.5) * 10);
            const offsetY = Math.round((Math.random() - 0.5) * 10);
            
            if (pos.left) noBtn.style.left = `calc(${pos.left} + ${offsetX}px)`;
            if (pos.right) noBtn.style.right = `calc(${pos.right} + ${-offsetX}px)`;
            if (pos.top) noBtn.style.top = `calc(${pos.top} + ${offsetY}px)`;
            if (pos.bottom) noBtn.style.bottom = `calc(${pos.bottom} + ${-offsetY}px)`;
            
            // Update the "are you sure" message - random each time, never stops
            const messages = [
                "Are you sure? ðŸ¥º",
                "Really? ðŸ˜¢",
                "Think again! ðŸ’•",
                "PUHLEASE? ðŸ¥¹",
                "COME ONNNNNNN PLS!!? ðŸ’–",
                "i will cry ðŸ˜¿",
                "just click yes.......... tf",
                "the green button is right there",
                "im not gonna ask again",
                "FINAL TIME, JUST CLICK YES",
                "STOP STALLING, JUST CLICK YES",
                "this is gonna repeat, so you might as well click yes",
                "why are you like this ðŸ˜­",
                "the answer is yes btw",
                "just say yes already!",
                "you know you want to ðŸ’•",
                "resistance is futile",
                "click. the. green. button.",
                "i'm running out of things to say...",
                "jk i can do this forever ðŸ˜"
            ];
            
            // Pick a random message different from the current one
            let newMessage;
            do {
                newMessage = messages[Math.floor(Math.random() * messages.length)];
            } while (newMessage === areYouSure.textContent && messages.length > 1);
            
            areYouSure.textContent = newMessage;
        }
    </script>
</body>
</html>
{{ end }}
